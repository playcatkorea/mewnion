name: Keep Services Alive

# ë§¤ì¼ 6ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰ (ë¬´ë£Œ í”Œëœ ìŠ¬ë¦½ ë°©ì§€)
on:
  schedule:
    # ë§¤ì¼ 00:00, 06:00, 12:00, 18:00 (UTC ê¸°ì¤€)
    - cron: '0 0,6,12,18 * * *'
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  ping-services:
    runs-on: ubuntu-latest

    steps:
      - name: Ping Supabase
        run: |
          echo "ğŸ”„ Pinging Supabase to keep project active..."
          curl -X GET "https://ylyypseqjlwsfakagbpn.supabase.co/rest/v1/" \
            -H "apikey: ${{ secrets.SUPABASE_ANON_KEY }}" \
            -H "Content-Type: application/json" \
            --max-time 30 \
            --fail-with-body || echo "âš ï¸ Supabase ping failed (might be paused)"
          echo "âœ… Supabase ping completed"

      - name: Ping Production Site (if deployed)
        run: |
          echo "ğŸ”„ Pinging production site..."
          # ë°°í¬ëœ ì‚¬ì´íŠ¸ URLë¡œ ë³€ê²½í•˜ì„¸ìš”
          # curl -X GET "https://your-site.onrender.com" --max-time 30 || echo "Site not deployed yet"
          echo "â­ï¸ Skipping (site not deployed yet)"

      - name: Health Check Summary
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "âœ… Keep-alive ping completed at $(date)"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
