# 홈 페이지 캣룸 임베드 완료 🎉

## 📋 작업 개요

로그인한 사용자가 홈 페이지에 방문하면, Hero 섹션 바로 다음에 **실시간으로 움직이는 캣룸 미리보기**가 표시됩니다.

## ✨ 주요 기능

### 1. **로그인 상태 감지**
- 로그인하지 않은 사용자: 캣룸 미리보기 숨김
- 로그인한 사용자: Hero 섹션 바로 아래에 캣룸 표시

### 2. **실시간 캣룸 프리뷰**
- 실제 캣룸과 동일한 CatRoomScene 컴포넌트 재사용
- 고양이들이 실시간으로 움직임
- 온라인 유저 표시
- 가구 배치 미리보기

### 3. **인터랙티브 요소**
- 고양이 선택 가능
- 전체화면으로 보기 버튼
- 꾸미기/고양이와 놀기 바로가기

### 4. **통계 대시보드**
- 고양이 수
- 가구 수
- 현재 방문자 수
- 평균 행복도

## 📁 수정된 파일

### 1. 홈 페이지 메인
**파일**: `src/pages/home/page.tsx`

**변경사항**:
```tsx
import HomeCatRoomPreview from './components/HomeCatRoomPreview';
import { useAuth } from '../../context/AuthContext';

export default function Home() {
  const { isAuthenticated } = useAuth();

  return (
    <div className="min-h-screen w-full overflow-x-hidden">
      <Header />
      <main className="w-full">
        <HeroSection />
        {isAuthenticated && <HomeCatRoomPreview />} {/* 추가된 부분 */}
        <MyCatRoomSection />
        ...
      </main>
      <Footer />
    </div>
  );
}
```

### 2. 캣룸 미리보기 컴포넌트 (신규)
**파일**: `src/pages/home/components/HomeCatRoomPreview.tsx`

**주요 기능**:
```tsx
- CatRoomScene 컴포넌트 임베드
- 실시간 고양이 움직임 시뮬레이션
- 통계 카드 표시
- 전체화면 버튼
- 반응형 레이아웃
```

## 🎨 UI/UX 특징

### 디자인
- **배경**: 그라데이션 (보라→분홍→보라)
- **블러 효과**: Glassmorphism 스타일
- **네온 테두리**: 보라색/분홍색 테두리
- **반응형**: 모바일/태블릿/데스크톱 최적화

### 레이아웃 구조
```
┌─────────────────────────────────────┐
│ 헤더 (사용자명, 행복도, 전체화면)    │
├─────────────────────────────────────┤
│                                     │
│     캣룸 씬 (실시간 애니메이션)      │
│                                     │
├─────────────────────────────────────┤
│  통계: 고양이|가구|방문자|행복도     │
├─────────────────────────────────────┤
│ 푸터 (꾸미기 버튼, 놀기 버튼)       │
└─────────────────────────────────────┘
```

## 🔄 실시간 기능

### 자동 애니메이션
1. **고양이 움직임** (3초마다)
   - 랜덤하게 위치 변경
   - 활동 상태 변경 (앉기/걷기/자기/놀기)

2. **상태 표시**
   - 평균 행복도 계산
   - 실시간 업데이트

## 📊 통계 카드

| 카드 | 아이콘 | 색상 | 내용 |
|------|--------|------|------|
| 고양이 | `ri-user-heart-line` | 보라 | 현재 고양이 수 |
| 가구 | `ri-shopping-bag-3-line` | 분홍 | 배치된 가구 수 |
| 방문자 | `ri-team-line` | 파랑 | 온라인 방문자 수 |
| 행복도 | `ri-emotion-happy-line` | 노랑 | 평균 행복도 % |

## 🎯 사용자 플로우

```
홈 페이지 접속
    ↓
로그인 확인
    ↓
로그인 O → Hero 섹션 → 캣룸 미리보기 → 다른 섹션들
로그인 X → Hero 섹션 → 다른 섹션들 (캣룸 숨김)
```

### 캣룸 미리보기에서 가능한 액션
1. **고양이 클릭** - 선택/정보 보기
2. **전체화면으로 보기** - `/catroom` 이동
3. **꾸미기** - `/catroom` 이동 (꾸미기 모드)
4. **고양이와 놀기** - `/catroom` 이동

## 🚀 성능 최적화

### 컴포넌트 재사용
- `CatRoomScene` 컴포넌트 재사용
- 코드 중복 최소화
- 유지보수 용이

### 애니메이션 최적화
- `setInterval` 3초 간격 (부드러움 + 성능 균형)
- 불필요한 리렌더링 방지

## 📱 반응형 디자인

### 모바일 (< 640px)
- 통계 카드: 2열 그리드
- 버튼 세로 정렬
- 작은 폰트 크기

### 태블릿 (640px - 1024px)
- 통계 카드: 4열 그리드
- 버튼 가로 정렬

### 데스크톱 (> 1024px)
- 통계 카드: 4열 그리드
- 최대 너비: 5xl (1280px)
- 넓은 여백

## 🎨 추가 정보 섹션

캣룸 미리보기 아래에 3개의 기능 소개 카드:

### 1. 가구 꾸미기
- 아이콘: `ri-gift-line`
- 색상: 보라
- 내용: 다양한 가구로 캣룸 꾸미기

### 2. 고양이 케어
- 아이콘: `ri-heart-line`
- 색상: 분홍
- 내용: 밥주기, 놀아주기, 쓰다듬기

### 3. 방문자 교류
- 아이콘: `ri-team-line`
- 색상: 파랑
- 내용: 방명록과 채팅 기능

## ⚡ 향후 개선 사항

### 1. 실제 사용자 데이터 연동
```tsx
// Supabase에서 실제 캣룸 데이터 가져오기
const { data: userCatRoom } = await supabase
  .from('user_settings')
  .select('room_data, furniture, cats')
  .eq('user_id', user.id)
  .single();
```

### 2. 실시간 방문자 표시
```tsx
// Supabase Realtime으로 실제 온라인 유저 표시
supabase
  .channel('room:' + user.username)
  .on('presence', { event: 'sync' }, () => {
    // 실시간 방문자 업데이트
  })
  .subscribe();
```

### 3. 사진 찍기 기능
```tsx
// 캔버스를 이미지로 저장
const saveScreenshot = () => {
  const canvas = document.querySelector('canvas');
  const dataUrl = canvas.toDataURL('image/png');
  // 다운로드 또는 Supabase Storage 업로드
};
```

### 4. 코인 채굴 통합
```tsx
// 실시간 코인 채굴 정보 표시
<div className="coin-mining">
  <span>채굴 속도: {miningRate}/분</span>
  <span>보유 코인: {coins}</span>
</div>
```

## 🧪 테스트 시나리오

### 1. 로그인 전
1. 홈 페이지 접속
2. 캣룸 미리보기 없음 확인
3. 다른 섹션들만 표시

### 2. 로그인 후
1. 로그인
2. 홈 페이지 접속
3. Hero 섹션 바로 아래 캣룸 미리보기 표시
4. 고양이들이 움직이는지 확인
5. 통계 카드 정상 표시 확인

### 3. 인터랙션
1. 고양이 클릭 → 선택됨
2. "전체화면으로 보기" 클릭 → `/catroom` 이동
3. "꾸미기" 클릭 → `/catroom` 이동
4. "고양이와 놀기" 클릭 → `/catroom` 이동

### 4. 반응형
1. 모바일 크기로 축소 → 레이아웃 조정 확인
2. 태블릿 크기 → 레이아웃 조정 확인
3. 데스크톱 크기 → 최대 너비 제한 확인

## 🔧 주요 코드 스니펫

### 로그인 상태 확인
```tsx
const { isAuthenticated } = useAuth();

{isAuthenticated && <HomeCatRoomPreview />}
```

### 고양이 자동 움직임
```tsx
useEffect(() => {
  const interval = setInterval(() => {
    setRoomData(prev => ({
      ...prev,
      cats: prev.cats.map(cat => {
        // 랜덤 움직임 로직
        if (Math.random() > 0.7) {
          updatedCat.x = Math.max(20, Math.min(580, cat.x + (Math.random() - 0.5) * 20));
        }
        return updatedCat;
      })
    }));
  }, 3000);

  return () => clearInterval(interval);
}, []);
```

### 평균 행복도 계산
```tsx
const averageHappiness = Math.round(
  roomData.cats.reduce((sum, cat) => sum + cat.happiness, 0) / roomData.cats.length
);
```

## 📋 체크리스트

- [x] 홈 페이지에 조건부 렌더링 추가
- [x] HomeCatRoomPreview 컴포넌트 생성
- [x] CatRoomScene 재사용
- [x] 실시간 애니메이션 구현
- [x] 통계 카드 구현
- [x] 반응형 디자인 적용
- [x] 전체화면 버튼 연결
- [x] 추가 정보 섹션 추가
- [ ] 실제 데이터 연동 (향후)
- [ ] 실시간 방문자 표시 (향후)

---

**완료일**: 2025-01-13
**담당**: Claude AI Assistant
**상태**: ✅ 완료
